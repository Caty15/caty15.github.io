<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link type="text/css" rel="stylesheet" href="main.css"/>
    <title>Caty1s Hub</title>
</head>
<body>
    <h1>Caty1s Github Home Page</h1>
    <h2>my various random projects</h2>
    <p>Latest YouTube Video:</p>
    <iframe id="vidsrc" class="latestVideoEmbed" vnum='0' src="https://youtube.com/embed/${id}?controls=0&autoplay=1" width="600" height="340" frameborder="0" allowfullscreen></iframe>
</body>
<script>
    const loadVideo = (iframe) => {
        console.log("heyy")
        const cid = "UChpz7MKU7NtJGhZCozhDO4A"
        const channelURL = encodeURIComponent(`https://www.youtube.com/feeds/videos.xml?channel_id=${cid}`)
        const reqURL = `https://api.rss2json.com/v1/api.json?rss_url=${channelURL}`
        fetch(reqURL)
            .then(response => response.json())
            .then(result => {
                const videoNumber = 0
                const link = result.items[videoNumber].guid;
                const id = link.substring(link.indexOf(":") + 7);
                console.log(id)
                document.getElementById("vidsrc").src = `https://youtube.com/embed/${id}?controls=1&autoplay=0`;
            })
    }
    loadVideo()
</script>
</html>
